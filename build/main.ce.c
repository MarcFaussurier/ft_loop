#import "ft_loop.h"

static inline void ft_free(void **p)
{
	free(*p);
}

int main()
{
	ft_loop_create(loop, 0);
	defer(loop.run(););

	auto y = 0;
	auto z = 0;
	void *sb destructor(ft_free) = 0;
 loop.write(1, "4, ^(typeof( loop.write(1, "4, 0)) i ) { \n", 3);
	_(y, z)
	printf("okok\n");
	y += 1;
	z -= 1;
 loop.write(1, "21\n", 3, ^(typeof( loop.write(1, "21\n", 3, 0)) i ) { ;
	_(y)
	y += 1;
	printf("i=%i\n", y);
  });
});
}
